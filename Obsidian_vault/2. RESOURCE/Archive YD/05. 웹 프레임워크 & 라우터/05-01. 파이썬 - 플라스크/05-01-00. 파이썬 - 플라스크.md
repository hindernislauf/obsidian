# 연결 문서
- [[05-01-01. 플라스크 기초]]
- [[05-01-02. EC2에서 플라스크 서버 생성]]



# 서버의 종류
## 서버(Server)란?
- 클라이언트가 요청한 서비스를 제공해주는 프로그램
- 서버가 어떤 서비스를 제공하느냐에 따라 종류가 나뉘어짐
## 서버(Server)의 종류
- 웹 서버
- 메일 서버
- 파일 서버
- 데이터베이스 서버
- 프록시 서버

### 웹 서버(Web Server)란?
- 웹 브라우저와 같은 클라이언트로부터 HTTP(7계층) 요청을 받아들이고 HTML 문서와 같은 웹 페이지를 반환하는 컴퓨터 프로그램**(서버!)**
- 위에 언급한 기능들을 제공하는 컴퓨터 프로그램을 실행하는 컴퓨터**(물리 서버)**
![[스크린샷 2024-05-14 11.16.49.png]]

### HTTP
==Hypertext Transfer Protocol: 웹 상에서 데이터를 전달할 때 사용하는 프로토콜

### Protocol
==웹상에서 데이터를 주고 받을 때 지켜야 하는 규칙


# API(Application Programming Interface)
- 애플리케이션 프로그래밍 인터페이스
- 컴퓨터나 컴퓨터 프로그램 사이의 연결을 의미한다.



# 웹 서버 구조
![[스크린샷 2024-05-14 11.38.34.png]]
![[스크린샷 2024-05-14 13.12.07.png]]
### 정적 페이지(Static Web Page): 저장된 파일이 그대로 보인다.
- 웹 서버에 이미 저장된 파일(HTML파일, 이미지, JavaScript 파일 등)을 클라이언트에게 전송하는 웹 페이지다.
- 사용자는 서버에 저장된 데이터가 변경되지 않는 한 고정된 웹 페이지를 계속 보게 된다.
- 따라서 모든 사용자는 같은 결과의  웹 페이지를 서버에 요청하고 응답받게 된다.
#### 정적 페이지의 장점
- 다른 처리 없이 요청에 대한 파일만 전송하기 때문에 속도가 빠르다.
- 단순한 문서로 웹 서버를 구축하므로, 호스팅 서버에 연결하는 비용이 적다.
#### 정적 페이지의 단점
- 저장된 정보만 보여주기 때문에, 서비스가 한정적이다.
- 추가, 삭제, 수정 등의 작업이 모두 코드를 직접 건드려야 하기 때문에 관리가 힘들다.
#### 아파치 HTTP 서버(Apache HTTP 서버)
- 프로세스/스레드 기반 구조
- 사용자의 HTTP 요청이 올 때마다 프로세스 생성
- 1000개의 HTTP 요청 -> 1000개의 프로세스 요청
- 따라서 사용자의 요청이 많아지면 -> 프로세스 생성으로 인한 메모리 부족, CPU 과부하
- 커넥션이 1만개가 넘어가면 하드웨어 성능에 상관없이 더이상 커넥션을 형성하지 못하는 C10K 문제 발생
- 난이도는 상대적으로 아파치 쪽이 더 어려움

#### NGINX
- 비동기(asynchronous, 어떤 작업을 실행할 때 그 작업이 완료되지 않더라도 다음 코드를 실행하는 방식) 이벤트 기반 구조
- 이벤트: 커넥션 생성 및 제거, 새로운 요청 처리
- 수많은 요청이 들어와도 비동기 방식으로 대기시켜서 먼저 등록된 요청부터 처리해주는 방식
- 예전에는 아파치를 자주 사용했지만, 요즘에는 Nginx를 더 많이 사용하는 추세





### 동적 페이지(Dynamic Web Page): 다른 변수들에 의해 변경되어 보인다.
- 서버에 저장된 HTML 파일이 그대로 브라우저에 나오는 것이 아닌, **동적으로 만들어지는 웹 페이지**
- 요청에 관하여 사용자는 조건에 따라 다른 결과를 받게 된다.
- 사용자는 상황, 시간, 요청 등에 따라 달라지는 웹 페이지를 보게 된다.

#### 동적 웹 페이지의 종류
1. CSR(Client Side Rendering)![[스크린샷 2024-05-14 11.51.26.png]] ==> 사진 수정 필요. 보편적으로는 반대 방향이라고 함(강사님 피셜).
- CSR은 데이터가 없는 HTML 문서나 Static 파일만을 처음에 받아와 로드하고, 이후에 데이터를 요청하여 받아오는 방식이다.
- 자바스크립트를 사용하여 브라우저에서 페이지를 직접 렌더링을 진행한다.
- **모든 로직, 데이터 가져오기, 템플릿 및 라우팅 등은 서버가 아닌 클라이언트 측에서 처리한다.**

2. SSR(Server Side Rendering)
![[image (2).png]]
- **CSR과 상반되게 서버에서 동적으로 데이터까지 전부 삽입하여 완성된 HTML을 넘겨준다.**

- 서버 렌더링은 브라우저에서 응답을 받기 전에 처리되므로 클라이언트에서 데이터를 가져오거나 템플릿 작성에 대한 추가 왕복이 발생하지 않는다. (어쨌든 웹 서버에서 모든 요청이 처리된다.)

3. MPA(Multi Page Application)
- **새로운 페이지를 요청할 때마다 정적 리소스가 다운로드 되고, 그에 맞춰 전체 페이지를 다시 렌더링하는 방식이다.** (즉, SSR 방식으로 렌더링한다.)

- 인터넷 주소창에 주소를 입력하거나 링크를 클릭하는 등의 사용자가 어떠한 요청을 하게 되면, 그에 맞는 완전한 페이지를 받아오고 다시 렌더링된다.

- 장점은 검색 엔진 최적화(SEO, Search Engine Optimization) 관점에서는 유리하지만, 단점으로는 새로운 페이지를 이동할 때마다 완전히 새로 렌더링 되므로 깜빡거리고 프론트엔드와 백엔드가 밀접하게 연결되어 개발이 복잡할 수 있다.


4. SPA(Single Page Application)![[image (3).png]]
- 웹 애플리케이션에 필요한 **모든 정적 리소스를 최초 한 번만 다운로드**를 한다.  
	그 이후, 새로운 페이지에 대한 요청이 있을 때마다 페이지 갱신에 **필요한 데이터만 전달 받고 그 정보를 기준으로 페이지를 갱신**한다. (즉, CSR 방식으로 렌더링한다.)

- SPA를 만드는데 사용되는 프레임워크로 **React, Bue, Angular**가 있다.

- 장점으로는 최초 접속 시 맨 첫 페이지 로딩 시간을 길어도 이후 페이지부터는 속도가 빠르다. 또한 앞선 MPA와 달리 **깜빡거림이 없고 반응 속도가 좋다.** 또한 **로컬 데이터를 효과적으로 캐싱**할 수도 있다. 단점으로는 초기 구동 속도가 느리고 SEO에 불리하다는 것이다.



# WSGI(Web Server Gateway Interface)
- Python의 built-in Requests 처리 API
## WSGI가 필요한 이유
- 웹 서버는 파이썬을 알아들을 수 없다.
- 로컬에서는 단순히 Server 를 띄우는 스크립트를 실행함으로써 서버를 띄울 수 있지만, 실제 운영환경에서는 WSGI 를 통 Server 를 띄우게 된다.
- 웹 서버가 받은 요청을 WSGI(Apache, NGNIX)를 통해 해석한 다음, 실제 Python Application(Gunicorn)에서 이것을 처리하고, 결과값이 WSGI를 통해서 웹 서버(Django, Flask)에게 반환된다. 
![[스크린샷 2024-05-14 13.23.28.png]]

# 웹 애플리케이션 서버(Web Application Server)란?
- 동적 페이지(dynamic page)를 처리하는 서버
- 동적 페이지는 데이터베이스와 연결되어 필요한 데이터를 주고 받는다.











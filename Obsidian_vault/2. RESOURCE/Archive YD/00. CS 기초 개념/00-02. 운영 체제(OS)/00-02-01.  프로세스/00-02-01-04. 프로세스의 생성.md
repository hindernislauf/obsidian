## 중요도 🥇

새로운 프로세스는 기존의 프로세스에서 fork() 함수를 호출해 생성한다.

fork() 함수에는 함수를 호출한 프로세스를 복사하는 기능이 있다. 이 때 기존 프로세스를 부모 프로세스., 복사된 프로세스를 자식 프로세스라고 한다.

부모 프로세스에서 fork() 함수를 호출하면 **부모 프로세스는 자식 프로세스의 PID 값을, 자식 프로세스는 0을 반환한다.**


![](https://i.imgur.com/blSjlPR.jpeg)
(그림) 자식 프로세스의 생성

### 참고
운영 체제가 프로세스를 종료하는 경우는 다음과 같다.

- 프로세스가 운영 체제의 종료 서비스(exit())를 호출해 정상 종료하는 경우
- 프로세스의 실행 시간 또는 특정 이벤트 발생을 기다리는 시간이 제한된 시간을 초과한 경우
- 프로세스가 파일 검색 또는 입출력에 실패하는 경우
- 오류가 발생하거나 메모리 부족 등이 발생하는 경우

부모 프로세스는 다음과 같은 경우에 자식 프로세스를 종료시킬 수 있다.

- 자식 프로세스가 할당된 자원을 초과해 사용할 때
- 자식 프로세스에 할당된 작업이 없을 때


### 깊게 알기: fork() 함수의 반환값
fork() 함수의 반환값이 2개라는 부분을 이해하기 어려울 수 있으니 시스템 콜을 호출하는 코드를 보고 이해해 보자.

ForkSample.c
```c
#include <studio.h>
#include <unisted.h>

int main() {
	printf("start!\n");
	int forkRet = fork();
	if (forkRet == 0) {
		printf("child process %d\n", getpid())
	} else {
		printf("forkRet:%d parent process:%d\n", forkRet, getpid());
		}
		return 0;
}
```

위 코드를 실행하면 다음과 같은 결과가 나온다.

```
start!
forkRet:136 parent process:135
child process 136
```

start!는 부모 프로세스에 의해 한 번 출력된다.

그리고 부모 프로세스가 `fork()` 함수를 호출하면 반환값은 자식 프로세스의 PID인 136이 된다. 따라서 `else`문으로 가서 `forkRet` 값과 본인(부모 프로세스)의 PID를 출력한다.

자식 프로세스는 부모 프로세스가 `fork()` 함수를 호출한 시점에 생성되고, 반환값이 0이므로 첫 번째 조건문인 `forkRet == 0`을 만족한다. 

따라서 본인(자식 프로세스)의 PID를 출력하고 종료된다.
# 커널과 시스템 콜

## 중요도 🥇
### 커널
**커널(Kernel)** 은 OS의 핵심 요소로, 컴퓨터 하드웨어와 프로세스의 보안, 자원 관리, 하드웨어 추상화와 같은 중요한 역할을 수행한다. 특히 자원 관리를 위해 CPU  스케줄링, 메모리 관리, 입출력 관리, 파일 시스템 관리 등을 담당한다.

![](https://i.imgur.com/GzfOStf.jpeg)

(그림) 커널의 위치

운영 체제는 커널에서 관리하는 중요 자원에 사용자가 쉽게 접근하지 못하도록 커널 모드(Kernel mode)와 사용자 모드(User mode)로 모드를 나눈다. 커널 모드에서는 하드웨어에 직접 접근해 메모리, CPU와 같은 자원을 사용할 수 있다. 사용자 모드에서는 커널 모드의 자원에 접근할 수 없도록 제한을 둔다.

### 시스템 콜

사용자 모드에서 실행된 프로세스가 자원에 접근하려면 **시스템 콜(system call)** 을 호출해 커널에 요청해야 한다. 여기서 시스템 콜은 User mode에서 Kernel mode에 접근해 필요한 기능을 수행할 수 있게 하는 시스템 함수다. 커널은 시스템 콜로 받은 요청을 처리한 후 다시 시스템 콜로 결과 값을 반환한다.

![](https://i.imgur.com/RYbPjCk.png)
(그림) 시스템 콜의 호출 구조


시스템 콜을 사용해 프로세스 제어, 파일 조작, 장치 관리, 데이터의 유지 보수, 통신, 보호를 할 수 있다. 시스템 콜의 대표적인 예로는 프로세스를 생성하는 fork(), 부모 프로세스가 자식 프로세스의 수행을 기다리는 wait() 등이 있다.

---

#### 참고

시스템 콜에서 커널에 매개변수를 전달하는 방법은 3가지다.

1. 매개변수를 CPU의 레지스터에 직접 전달하는 방식이다. 단, 이 방식은 매개변수의 개수가 레지스터의 개수보다 많은 경우에 문제가 될 수 있어서 권장되는 방식은 아니다.
2. 매개변수를 메모리에 저장한 후 메모리의 주소 값을 레지스터에 저장하는 방식이다.
3. 매개변수를 프로그램의 스택(stack)에 push하고 OS에서 pop해 매개변수를 전달하는 방식이다.



# 스케줄링의 단계. 중요도 🥇

스케줄링은 장기 스케줄링, 중기 스케줄링, 단기 스케줄링으로 나뉜다. 아래의 프로세스 상태도에서 스케줄링이 일어나는 시점을 보면 다음 그림과 같다.
 
![](https://i.imgur.com/tFaFh5Q.png)
(그림) 스케줄링의 단계

- **장기 스케줄링(long-term scheduling)**: 준비 큐에 어떤 프로세스를 넣을지 결정해 메모리에 올라가는 프로세스 수를 조절한다. **잡 스케줄링(job scheduling)** 또는 **승인 스케줄링(admission scheduling)** 이라고도 한다. 현대 운영체제에서는 시분할 시스템을 사용하기 때문에 대부분 사용하지 않는다.
- **중기 스케줄링(mid-term scheduling)**: 메모리에 로드된 프로세스 수를 동적으로 조절한다. 메모리에 프로세스가 많이 로드되면 **스왑 아웃(swap out)** 해서 일부 프로세스를 통째로 저장한다. 스왑 아웃된 프로세스는 **중단 상태(suspended)** 가 된다. 중단 상태는 준비 상태에서 스왑 아웃된 '중단된 준비 상태'와 대기 상태에서 스왑 아웃된 '중단된 대기 상태'로 구분된다.
- **단기 스케줄링(short-term scheduling)**: 준비 큐에 있는 대기 상태 프로세스 중 어떤 프로세스를 다음으로 실행할지 스케줄링 알고리즘으로 결정한다. 즉, 어떤 프로세스를 디스패치할지 결정하는데, 이를 **CPU 스케줄링**이라고도 한다. 


스케줄러 관점에서 프로세스 스케줄링을 표현하면 다음 그림과 같다.
![](https://i.imgur.com/D9vcIkt.png)
(그림) 스케줄러 관점에서 스케줄링

---
#### 스케줄링 실행도 설명
1. 스케줄러가 준비 큐에 있는 프로세스(P1, P2, P3, P4) 중 하나를 선택해 CPU에 디스패치(프로세스 상태 용어 참고)한다. 이때 스케줄링 알고리즘을 이용한다.
2. CPU에서 프로세스를 실행한다. 이때 프로세스는 실행상태다.
	A. 프로세스 수행이 완료되면 프로세스를 종료한다.
	B. 일정 시간을 초과하면 인터럽트가 발생해 프로세스가 준비 큐로 들어가고 준비 상태가 된다.
	C. 입출력 요청이 들어오면 인터럽트가 발생한다. 이때 프로세스는 대기 큐로 들어가서 대기 상태가 된다. 입출력이 완료되면 프로세스는 준비 큐로 들어간다.
3. fork()가 호출되면 자식 프로세스가 생성되고, 자식 프로세스는 준비 큐로 들어간다.


---
#### 프로세스 상태(Process state) 용어
프로세스는 다음 5가지 상태 중 하나를 가진다.

- **생성(create)** : 프로세스가 생성되는 중이다.
    
- **실행(running)** : 프로세스가 프로세서를 차지하여 명령어들이 실행되고 있다.
    
- **준비(ready)** : 프로세스가 프로세서를 사용하고 있지는 않지만 언제든지 사용할 수 있는 상태로, CPU가 할당되기를 기다리고 있다.
    
- **대기(waiting)** : 프로세스가 입출력 완료, 시그널 수신 등 어떤 사건을 기다리고 있는 상태를 말한다.
    
- **종료(terminated)** : 프로세스의 실행이 종료되었다.
    

  
아래는 프로세스의 상태전이이다.  

- **디스패치(Dispatch)** : 프로세스가 준비 상태에서 실행 상태로 전환되었다.
    
- **타이머 런아웃(Timer Runout)** : 프로세스가 실행 상태에서 준비상태로 전환되었다. 일반적으로 선점 프로세스에서 발생한다.
    
- **블록(Block)** : 프로세스가 자원 부족, I/O 입출력대기, [인터럽트](https://namu.wiki/w/%EC%9D%B8%ED%84%B0%EB%9F%BD%ED%8A%B8 "인터럽트") 등 다른 사유에 의해 실행 상태에서 대기 상태로 전환되었다.(인터럽트: CPU가 특정 기능을 수행하는 도중에 급하게 다른 일을 처리하고자 할 때 사용할 수 있는 기능)
    
- **활성화(Wake-up)** : 프로세스가 부족한 자원을 재할당 받았다는 등의 사유로 대기 상태에서 준비 상태로 전환되었다.

---
#### 하나 더 알기

![](https://i.imgur.com/23uAqMH.png)
(그림) 스왑 아웃과 스왑 인

- **스왑 아웃(swap out)**: 프로세스가 실행되려면 메모리에 로드되어야 한다. 그런데 메모리 공간보다 많은 프로세스가 로드되는 경우가 있을 수 있다. 이럴 때 중기 스케줄러가 이벤트 발생을 기다리고 있는 프로세스를 통째로 저장 공간(SSD와 같은 영역)으로 옮겨 저장하는 것을 스왑 아웃이라고 한다.
- **스왑 인(swap in)**: 스왑 아웃한 프로세스에서 이벤트 요청이 오면 해당 프로세스를 통째로 다시 메모리에 로드하는 것을 스왑 인이라고 한다.
- **스와핑(swapping)**: 스왑 아웃과 스왑 인처럼 프로세스를 통째로 메모리 영역과 저장 공간으로 옮기는 것을 스와핑이라고 한다. 스와핑하면 메모리 공간보다 많은 프로세스를 실행할 수 있다는 장점이 있다.




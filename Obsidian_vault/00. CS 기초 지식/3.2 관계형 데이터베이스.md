# 3.2 관계형 데이터 베이스

### 관계형 데이터베이스?
- 기술 면접에서 출제 빈도가 높다
- 주로 사용하는 개념?
	: 키, 무결성, 인덱스, ORM

###  3.2.1 키
	데이터베이스에서 튜플을 구분하기 위한 속성 또는 속성의 집합
- **유일성**  
	: 하나의 키값으로 튜플을 식별할 수 있는 특성
- **최소성**  
	: 튜플을 식별하는 데 필요한 속성만으로 이루어져 있는 특성

##### DBMS 5가지 키 (데이터 관리 시스템, 데이터 매니지먼트 시스템)
- 슈퍼 키
- 후보 키
- 기본 키
- 대체 키
- 외래 키
***
- **슈퍼 키**   
	: 튜플을 식별할 수 있는 키  
	: 유일성 (튜플을 식별할 수 있어서)    
	: 최소성을 만족하지 않아도된다 (후보 키는 만족해야)    
***
- **후보 키**  
	: 유일성 (튜플을 식별)    
	: 최소성 (필요한 속성으로만 구성)    
***
- **기본 키**  
	: 후보 키 중에서 메인이되는 키  
	: NULL 값을 가지면 안된다  
***
- **대체 키**  
	: 후보 키 중 기본 키를 제외한 키  
***
- **외래 키**  
	: 다른 테이블의 기본 키를 참조하는 키  

![](https://i.imgur.com/HEzStLv.png)
_슈퍼 키 안에 후보 키, 후보키 안에 키본 키와 대체 키_

![](https://i.imgur.com/FfXcjnG.png)
_파일 시스템, 데이터베이스 모델링, 관계형 데이터베이스 용어 비교_

### 3.2.2 무결성
- 정확성
- 일관성
***
**정확성?**  
-  저장된 데이터가 실제 데이터와 일치하는지  
***
**일관성?**  
- 데이터가 일정하게 유지되는지  
***

##### 데이터 무결성의 종류
- 개체 무결성
- 도메인 무결성
- 참조 무결성
***
**개체 무결성?**  
-  모든 테이블이 기본 키를 가져야 한다.  
-  기본 키의 값은 NULL이 될 수 없다.  
-  중복되지 않고 고유한 값을 가져야 한다.  
***
**도메인 무결성?**  
-  테이블의 속성 값은 도메인에 속해야 한다.  
-  도메인은 속성이 가질 수 있는 값의 집합  
***
**참조 무결성?**  
-  외래 키의 값은 참조하는 테이블의 기본 키 값과 동일하거나 NULL이어야 한다.  
***

### 3.2.3 인덱스
##### 인덱스
	주소를 저장하는 것
-  속성 값과 튜플이 저장되어있음   
	: 데이터베이스에서 튜플의 검색 성능을 높히기 위해  

***
 **키 - 값 형태**
	: 인덱스 테이블에 저장  
	: '속성 값-튜플 주소'   
***
>인덱스 테이블은 **속성 값을 기준으로 정렬 상태를 유지한다.**

![](https://i.imgur.com/pxO0sRE.png)
_빼빼로 튜플을 제거해도 인덱스는 남아있다_

**장점**
- 검색 속도가 빠르다
	: 데이터가 정렬되어있어서  
***
**단점**
- 추가 공간이 필요
	: 인덱스 테이블을 저장해야해서  
- 데이터를 추가, 수정, 삭제하는 경우에는 속도가 느리다
	: 재정렬해야 하므로  
***
**튜플의 삭제 연산이 발생하는 경우 인덱스 테이블에서 데이터는 '사용하지 않음' 처리가 된다?**
-  실제로 삭제되지 않고 테이블에 남아있다.  

**빼빼로 튜플을 삭제했는데도 인덱스 테이블에는 빼빼로가 남아있다?**
-  삭제 연산이 빈번하게 일어나면 실제 사용하는 데이터는 적어서 성능저하   
(인덱스 테이블의 크기는 일정하다)  
-  데이터 양이 방대하며 검색을 자주하는 경우에 인덱스를 사용하자  
(데이터 변경이 많으면 인덱스 사용을 자제하자)  
![](https://i.imgur.com/nyr3phJ.png)
빼빼로 튜플을 삭제
***
**인덱스를 구현하는 대표적인 방법?**
-  해시테이블, B+- 트리

##### 해시 테이블 인덱스
-  속성 값으로 해시 값을 계산해 인덱싱하는 방법  
***
**검색하려는 값을 온전히 입력할 때만 사용할 수 있다?**
-  해시 함수 특성상 속성 값을 그대로 검색해야해서  
***
**'빼빼로'의 인덱스를 검색하는 것만 가능?**
-  '빼로 시작하는 속성 값'의 인덱스를 찾는건 불가능  
-  검색 속도가 빠른데도 자주 사용하지 않는 방식  
![](https://i.imgur.com/mFhvANF.png)


#### B+- 트리 인덱스  
인덱스 테이블을 구현할 때 트리구조를 많이 사용  
-  B+ 트리 인덱스  
-  B- 트리 인덱스  
(B는 Balanced를 의미)  
***
**B+ 트리?**
-  단말 노드에만 데이터를 저장  
-  단말 노드간에는 연결 리스트로 연결  
***
**B- 트리?**    
-  모든 노드에 데이터를 저장  

### 3.2.4 ORM
	 객체와 관계형 데이터베이스를 매핑하는 도구 (Object-Relational Mapping)  

![](https://i.imgur.com/KiIc1Pu.png)

**객체 지향 프로그래밍 언어를 이용해 프로그램을 개발할 때 편리하다?**  
- 데이터베이스를 프로그래밍 언어의 객체 관점으로 바라볼 수 있어서  
***
**코드의 가독성을 높이고 개발자 편의성을 증대할 수 있다?**  
-  SQL문을 사용하지 않고 객체 지향적 코드를 작성할 수 있어서  
-  복잡한 프로젝트를 수행할 때는 ORM만으로 서비스를 구현하기 어려울 수 있다.  
***
##### 대표적인 ORM 프레임 워크
- 자바 / 하이버네이트
- 파이썬 / 장고
- 루비 / 액티브 레코드


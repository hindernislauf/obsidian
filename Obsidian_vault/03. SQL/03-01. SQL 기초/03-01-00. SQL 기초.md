# SQL 종류
 ---
 - ## DML : 데이터 조작어 : DATA : CRUD : 트랜잭션
	 - ### C(insert into) R(select from) U(update set) D(delete)
		 - #### CREATE : INSERT INTO VALUES
		 - #### READ : SELECT FROM
		 - #### UPDATE : UPDATE SET WHERE LIMIT
		 - #### DELETE : DELETE FROM WHERE LIMIT
	 - ### READ : SELECT FROM
		```
		 USE world;
		# 현재 선택된 데이터베이스 출력
		SELECT database();
		SHOW tables;
		```
		 - #### select (columns) from (table)
			```
			 SELECT * FROM country;
			SELECT Code, Name, Population FROM country;
			```
	 - ### AS : alias
		```
		SELECT Code, Name AS country_name, population
		FROM country;
		```
	 - ### Operator
		 - #### 연산자 우선순위 : 산술 > 비교 > 할당
		 - #### SELECT : (1(True), 0(False))
		 - #### WHERE : True 인 데이터만 출력 : 산술, 비교, 논리
			 - ##### BETWEEN AND, IN, NOT IN, LIKE
		 - #### 산술 (+, -, *, /, %)
			 - ##### 데이터 + 데이터 = 데이터
			```
			# 인구밀도 컬럼을 추가 : population / surfacearea
			SELECT code, name, population, surfacearea
				, population/surfacearea AS pps
			FROM country;
			
			# 국가코드, 국가이름, 인구수, GNP(총GNP), 1인당 GNP 출력
			SELECT code, name, population, gnp
				, gnp / population * 1000 AS gpp
			FROM country;
			```
		 - #### 비교(=, !=, >, <, >=, <=)
			 - ##### 데이터 + 데이터 = 논리값 : 조건 1개
			```
			# Asia 대륙이면 1, 아니면 0 출력하는 컬럼 추가
			SELECT code, name, continent, continent = 'Asia' AS is_Asia
			FROM country;
			
			# 국가코드, 국가이름, 독립년도, 독립년도가 1900년 이후이면 1, 아니면 0 출력
			SELECT code, name, indepyear, indepyear >= 1900 AS upper_1900
			FROM country;
			```
		 - #### 논리(AND(T and T = T), OR(F or F = F), NOT) 
			 - ##### 논리값(비교연산) + 논리값(비교연산) = 논리값 : 조건 2개 이상
			 - ##### 논리 : True(1), False(0)
			```
			# 아시아 대륙이면서 1900년도 이후에 독립한 국가를 1로 출력
			SELECT code, name, continent, indepyear
				, continent = 'Asia' AS is_asia
				, indepyear >= 1900 AS upper_1900
				,(continent = 'Asia') AND (indepyear >= 1900) 
					AS is_asia_upper_1900
			FROM country;
			
			# WHERE : 연산자를 사용하여 조건을 만들어 True 데이터만 출력
			SELECT code, name, continent #, continent = 'Asia' AS is_Asia # 3
			FROM country # 1
			WHERE continent = 'Asia'; # 2
			```
		 - #### IN, NOT IN 
			 - ##### 여러개의 컬럼을 OR로 출력할 때 쿼리를 줄여줌
			```
			SELECT code, name, continent, population
			FROM country
			WHERE Continent IN ('Asia', 'Africa');
			```
		 - #### LIKE
			 - ##### 특정 문자열이 포함된 데이터 출력
			```
			# 국가 이름이 A로 시작되는 국가 출력
			SELECT code, name, population
			FROM country
			WHERE name LIKE '%K%';
			
			USE sakila;
			SELECT * FROM film;
			
			# 영화 내용에 robot이 들어가고 영화 상영 시간이 60 ~ 100분인 영화 출력
			# 출력 : 영화 제목(title), 영화 설명(description), 상영시간 (length)
			SELECT title, description, length
			FROM film
			WHERE description LIKE '%robot%'
				AND length BETWEEN 60 AND 100;
			
			SELECT * FROM city;
			```
	 - ### ORDER BY : ASC(생략), DESC
		```
		USE world;
		SELECT code, name, population
		FROM country
		ORDER BY population DESC;
		
		# 정렬을 할때 컬럼을 여러개 설정 가능
		SELECT countrycode, name, population
		FROM city
		ORDER BY countrycode, population DESC;
		
		# 4000만 이상인 아시아 국가중에 인구수 GNP가 높은 순으로 출력
		# 출력 : 국가코드, 국가이름, 인구수, 대륙, GNP
		SELECT code, name, population, continent, GNP
			, GNP/population AS gpp
		FROM country
		WHERE population >= 4000 * 10000
			AND continent = 'Asia'
		ORDER BY gpp DESC;
		
		SELECT *
		FROM country
		WHERE code = 'kor';
		```
	 - ### LIMIT : num1(limit) : num1(skip), num2(limit)
		```
		# 인구수가 많은 1위 ~ 5위 국가 출력
		# 인구수로 내림차순 정렬 -> 데이터 갯수 5개 제한
		SELECT code, name, population
		FROM country
		ORDER BY population DESC
		LIMIT 5;
		
		# 인구수가 많은 6위 ~ 8위 국가 출력
		# LIMIT num1(skip:5), num2(limit:3)
		SELECT code, name, population
		FROM country
		ORDER BY population DESC
		LIMIT 5, 3;
		
		# city 테이블에서 한국과 중국 도시중
		# 인구수가 많은 순으로 3위 ~ 10위까지 도시 출력
		SELECT countrycode, name, population
		FROM city
		WHERE countrycode IN ('kor','chn')
		ORDER BY population DESC
		LIMIT 2,8;
		```
---
 - ## DDL : 데이터 정의어 : DATBASE, TABLE : CRUD
	 - ### C(create) R(show, desc) U(alter) D(drop)
		 - #### CREATE : CREATE
		 - #### READ : SHOW, DESC
		 - #### UPDATE : ALTER
		 - #### DELETE : DROP
	 - ### DDL : CREATE : CREATE
		 - #### CREATE DATABASE <database_name>
		 - #### CREATE TABLE <table_name> (field, datetype, constra)
		 - #### Datatype 	
			 - ##### Number 
				 - ###### INT, FLOAT(소수점), DOUBLE(더 많은 소수점)
			 - ##### String
				 - ###### CHAR(고정길이 문자열 유리), VARCHAR(가변길이 문자열 유리), TEXT
			 - ##### Datetime
				 - ###### DATETIME(직접 지정한 시간 저장), TIMESTAMP(현재 시간 저장)
		 - #### Constraint
			 - ##### PRIMARY KEY : NOT NULL + UNIQUE : row 구분
			 - ##### NOT NULL(빈값 X), UNIQUE(중복 X), DEFAULT, AUTO_INCREMENT
			 - ##### FOREIGN KEY : 데이터 무결성을 유지
				 - ###### ON UPDATE, ON DELETE
				 - ###### CASCDE, SET NULL, SET DEFAULT, RESTRICT
	 - ### DDL : READ : SHOW, DESC
		 - #### SHOW : 목록출력
		 - #### DESC : 테이블 구조
	 - ### DDL : UPDATE : ALTER
		 - #### ADD, MODIFY, DROP
	 - ### DDL : DELETE : DROP
---
 - ## DCL : 데이터 제어어 : SYSTEM
 ---
 - ## Functions
	- ### ROUND(반올림)
	- ### COUNT
	- ### CONCAT
	- ### DISTINCT(중복 제거해서 출력)
	- ### DATE_FORMAT
	- ### Condition : 조건문
		- #### IF(condition, true, false)
			```
			# 도시인구가 100만 이상이면 big city, 아니면 small city 출력
			SELECT name, population
				,IF(population >= 100 * 10000, 'big city','small city')
			FROM city;
			```
		- #### IFNULL : NULL 데이터이면 특정 데이터로 출력
			```
			# indepyear가 NULL이면 0을 출력
			SELECT code, name, indepyear
				,IFNULL(indepyear, 0)
			FROM country;
			```
		- #### CASE WHEN THEN ELSE END
			(if, elif, else)
			```
			SELECT name, population
				, CASE
					WHEN population >= 500 * 10000 THEN 'big'
			        WHEN population >= 100 * 10000 THEN 'medium'
			        ELSE 'small'
				END AS scale
			FROM city
			ORDER BY population DESC;
			```
		- ### GROUP BY
			- #### 데이터 그룹핑 : 중복된 데이터를 결합해서 데이터를 출력
			- #### 데이터 크룹핑 : 중복된 데이터를 결합해서 데이터를 출력
			- #### 결합함수 : COUNT, MIN, MAX, AVG, MEDIAN, SUM, ...
			```
			CREATE DATABASE test;
			USE test;
			
			CREATE TABLE user(
				un VARCHAR(20)
			    , income INT
			);
			DESC user;
			
			INSERT INTO user(un, income)
			VALUES ('A', 100), ('B', 200)
				, ('C',300), ('A', 400), ('B', 500);
			SELECT * FROM user;
			
			SELECT un, SUM(income) AS total_income
				, COUNT(un) AS count
			FROM user
			GROUP BY un;
			```
			
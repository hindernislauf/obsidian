# OSI 7 Layer
![[Pasted image 20240510152035.png]]
![[Pasted image 20240510152050.png]]
- ### 1계층 물리계층 (네트워크 접속 계층)
	장비 : **허브**
	
- ### 2계층 데이터 링크 계층 (네트워크 접속 계층)
	장비 : 스위치
	**스위치, 이더넷, 프레임, 와이파이**
	스위치 -> 맥 주소 (Mac Address) -> 48비트, 16진수
	eth0, enX0, en0 : 이더넷 인터페이스 이름
		물리적인 LAN 카드와 LAN 카드를 제어하기 위한 소프트웨어 계층까지 포함하는 개념
	lo : loopback 인터페이스
		시스템 내부 접속 테스트에 사용
		물리적인 하드웨어 장치와 연결되지 않은 가상 인터페이스
		IP주소 : 127.0.0.1 *or*  호스트명 : localhost
	스위치장비 에 연결되어 있는 컴퓨터들이 ethernet이라는 규칙하에 프레임을 주고받음


- ### 3계층 네트워크 계층 (인터넷 계층)
	네트워크 : 하나의 스위치에 연결되어 있는 컴퓨터의 모음
	장비 : 라우터 (router)
	**라우터, 패킷, ip, icmp**
	라우터 -> IP주소 -> 32비트, 10진수
	IP(Internet Protocol)
		인터넷 프로토콜 는 **패킷**이 네트워크를 통해 목적지에 도착할 수 있도록 라우팅, 주소 지정을 위한 규칙의 집합
	Source : 보내는 분, 출발지
	Destination : 받는분, 목적지, 도착지
	IP 주소 = 네트워크 ID(자신이 속한 네트워크) + 호스트 ID(해당 네트워크에 속한 특정 컴퓨터)
	![[Pasted image 20240510110936.png]]
	공인(public)IP vs 사설(private)IP
		공인 IP : 인터넷 전체에서 유일한 주소
			(대한민국 ... ㅇㅇ아파트)
		사설 IP : 네트워크상에서 유일한 주소
			(101동 101호)
	A클래스 : 대규모 네트워크
		공인 IP 주소 범위 : 1.0.0.0 ~ 9.255.255.255, 11.0.0.0 ~ 126.255.255.255
		사설 IP 주소 범위 : 10.0.0.0 ~ 10.255.255.255
			서브넷 마스크 : 255.0.0.0
			프리픽스 : /8
	B클래스 : 중간 규모 네트워크
		공인 IP 주소 범위 : 128.0.0.0 ~ 172.15.255.255, 172.32.0.0 ~ 191.255.255.255
		사설 IP 주소 범위 : 172.16.0.0 ~ 172.31.255.255
			서브넷 마스크 : 255.255.0.0
			프리픽스 : /16
	C클래스 : 소규모 네트워크
		공인 IP 주소 범위 : 192.0.0.0 ~ 192.167.255.255, 192.169.0.0 ~ 223.255.255.255
		사설 IP 주소 범위 : 192.168.0.0 ~ 192.168.255.255
			서브넷 마스크 : 255.255.255.0
			프리픽스 : /24
			
			프리픽스 표기법 : 서브넷 마스크를 슬래시 비트 수로 나타낸것
			
	IP 주소
	- 네트워크 주소 : 호스트 ID가 모두 10진수로 0인 주소
	- 브로드 캐스트 주소 : 호스트 ID가 모두 10신수로 255인 주소
		**네트워크 주소와 브로드캐스트 주소는 IP 주소로 할당 불가능**
		**브로드 캐스트 : 네트워크에 있는 모든 호스트로 데이터를 전달하는 방식 (카톡 공지 느낌)** 
	NAT(Network Address Translation)
	- 라우터를 통한시설 IP 주소 간 변환 기술
	- NAT는 사설 네트워크의 IP 주소로 변환하여 외부와 통신 가능 하도록 함
	DHCP(Dynamic Host Configuration Protocol)
	- 네트워크에 연결된 장치에 IP 주소, 서브넷 마스크, 게이트웨이 주소, DNS 서버 주소 등을 자동으로 할당하는 프로토콜
	- DHCP는 네트워크 관리자가 IP 주소를 수동으로 할당하는 번거로움을 줄이고, 네트워크의 효율성을 향상시키기 위해 사용
	mac에서 공인IP 를 확인하기 위해서는 **curl ifconfig.me** 를 입력해야 한다.
		사설IP = ifconfig
	Ping (Packeet INternet Groper) : 네트워크 상태를 점검, 진단하는 명령어
	tshark 설치
		sudo apt -y install tshark
		ping www.naver.com -> IP주소 확인(223.130.200.219)
		내 컴퓨터에서 네이버로 나가는 것만 확인
		sudo tshark -i enX0 -f icmp -Y "ip.dst == 223.130.200.219 or ip.src == 223.130.200.219"

- ### 4계층 전송 계층 (전송 계층)
	전송 계층의 역할
	- 네트워크 계층(3계층)이 데이터를 전달할 때, 전송 계층(4계층)은 데이터가 제대로 전달 되었는지 확인
	- 데이터가 최종적으로 도착할 **애플리케이션**이 무엇인지 식별하는 기능
	- 어느 애플리케이션에 도착할지 식별해야하므로 **포트(port)** 개념 사용
	포트(Port)
	- 프로세스 구분을 위해 사용하는 논리적 엔드포인트 : 0 ~ 65536 사이의 번호를 사용
		- 엔드포인트(endpoint)란 시작지점(source), 도착지점(destination)을 의미함
		- 엔드포인트로 IP 주소와 Port번호를 사용함
	- 포트는 4계층 프로토콜인 TCP와 UDP에서 사용됨
	- 포트 번호는 0 ~ 65535의 범위의 숫자로 구성됨
		- 포트번호 0 ~ 1023 : 잘 알려진 포트(well known port), 시스템 포트(system port)로 정해져 있음
		- HTTP : 80
		- SSH : 22
	통신 방법
	- 연결형 통신 ( 연결형 통신 프로토콜 : TCP (Transmission Control Protocol ))
		- 데이터를 신뢰성 있고 정확하게 전달
		- 상대방과 계속 연락하면서 통신
	- 비연결형 통신( 비연결형 통신 프로토콜 : UDP (User Datagram Protocol ))
		- 데이터를 효율적으로 전달
		- 상대방 반응을 확인하지 않고 일방적으로 전달
	TCP 
	![[Pasted image 20240510144237.png]]
	- 노란 네모 부분에서 받았는지 확인함
	
	![[Pasted image 20240510144402.png]]

	TCP vs UDP 사용 예
		TCP
		- 웹(HTTP) : 웹 브라우저가 웹 페이지를 요청할때
		- 이메일(SMTP) : 이메일을 수신하거나 전송할 때
		- 파일 전송 (FTP) : 서버와 클라이언트 간 파일 전송
		온라인 게임에서 : 유저레벨, 경험치, 아이템 구매 및 판매 거래 내역, 퀘스트
		UDP
		- DNS : 도메인 이름을 IP주소로 해석할 때
		- 온라인 게임
		- 영상 및 오디오 스트리밍 : 약간의 데이터 손실이 발생할 수 있지만 딜레이를 최소화하고 빠른 스트리밍 지원
		온라인 게임에서 : 플레이어 위치, 이동 및 동작 상태, 무기 발사 등 게임 액션
		
	sudo netstat -tlnp
		0.0.0.0(모든 대역에): * (모든 포트)
	LISTEN : 해당 포트가 클라이언트의 요청을 기다리고 있다
	ESTABLISED : TCP연결 성공, 클라이언트와 데이터 주고받을 준비 완료
		(3 way hand shake가 완료되어 데이터를 주고받을수 있다)
	CLOSE : 포트가 닫혀있다
	로드밸런서(Loadbalancer)
	- 서버를 여러개로 분산시키는것
	L4 로드밸런서(L4 Loadbalancer)
	- L4 로드밸런서는 4계층(전송계층)에서 작동
	- IP주소와 포트 번호로 트래픽을 분산
	스케일 업(scale up)
	- 서버 사양을 올림
	스케일 아웃(scale out)
	- 서버 개수를 늘림


- ### 응용계층
	- 5계층 세션 계층
	- 6계층 표현 계층
	- 7계층 응용 계층
![[Pasted image 20240510152303.png]]
	L7 로드밸런서(L7 Loadbalancer)
	- L7 로드밸런서는 7계층에서 작동하는 로드밸런서
	- URL, 헤더, 쿠키 정보 등을 활용한 로드 밸런서
![[Pasted image 20240510150659.png]]
- ### DNS
	- 웹 사이트의 IP주소와 도메인 주소를 이어주는 시스템
	웹 사이트의 IP 주소 확인 : nulookup ~주소 : IP주소를 알수 있다
	맥에서 DNS 확인 : cat /etc/hosts
- ### ISP(Internet Service Provider)
	- 인터넷에 접속하는 수단을 제공하는 주체
	- 국내 ISP는 KT,SKT,LG U+ 등이 있음
	![[Pasted image 20240510153716.png]]
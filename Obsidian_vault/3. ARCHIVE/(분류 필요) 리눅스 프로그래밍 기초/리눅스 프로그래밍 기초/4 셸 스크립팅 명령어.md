# 4. Shell Scripting

셸 프로그래밍(Shell Programming)은 리눅스에서 자주 사용되는 자동화 및 시스템 관리 작업을 수행하는 데 유용한 도구입니다. 셸 스크립트는 셸 명령어, 변수, 제어 구조 등을 사용하여 작성됩니다.

## 1. Shell이란?

  Shell은 운영 체제의 사용자 인터페이스(UI) 중 하나로, 사용자와 운영 체제 사이에서 명령어를 해석하여 컴퓨터가 실행할 수 있게 하는 프로그램입니다. 사용자는 텍스트 기반의 명령어를 입력하여 프로그램을 실행하거나, 파일을 관리하고, 시스템 설정을 변경하는 등의 작업을 할 수 있습니다.

### Shell의 기능

- **프로그램 실행**: 사용자가 입력한 명령어에 따라 프로그램을 실행합니다.
- **파일 시스템 관리**: 파일 및 디렉터리 생성, 수정, 이동, 삭제 등의 작업을 수행합니다.
- **프로세스 관리**: 실행 중인 프로세스를 모니터링하고 관리합니다.
- **입출력 리다이렉션**: 프로그램의 출력을 다른 파일이나 프로그램으로 전송할 수 있습니다.
- **사용자 환경 설정**: 사용자 환경 변수를 설정하거나, 사용자 세션을 커스터마이징합니다.

Shell은 시스템과의 상호작용을 위한 핵심적인 도구이며, 시스템 관리자나 개발자들이 시스템을 효율적으로 제어하고 관리할 수 있게 해줍니다.

## 2. Shell scripting이란?

  Shell scripting은 명령어들을 모아서 실행 파일 형태로 만든 스크립트를 말합니다. 이 스크립트는 Shell을 통해 실행되며, 주로 반복적인 작업을 자동화하거나, 시스템 관리 작업을 단순화하기 위해 사용됩니다. Shell 스크립트는 텍스트 파일에 쓰여지며, Shell이 이해할 수 있는 명령어와 프로그래밍 구조(조건문, 반복문 등)를 포함할 수 있습니다.

### **Shell Scripting의 특징**

- **자동화**: 자주 수행되는 작업들을 스크립트로 작성해 두면, 한 번에 여러 명령어를 자동으로 실행할 수 있습니다. 이는 시간을 절약하고, 반복 작업의 오류 가능성을 줄여줍니다.
- **유연성**: 다양한 조건에 따라 다르게 동작하는 로직을 구현할 수 있으며, 사용자 입력에 따라 동적으로 실행되는 작업을 만들 수 있습니다.
- **효율성**: 시스템 관리 작업을 스크립트로 미리 정의해 둠으로써, 시스템 관리자가 수동으로 각각의 명령어를 입력하는 수고를 줄일 수 있습니다.
- **이식성**: 대부분의 Unix/Linux 기반 시스템에서 Shell 스크립트를 실행할 수 있으므로, 스크립트 하나로 여러 시스템에서 동일한 작업을 수행할 수 있습니다.

### **Shell Scripting의 사용 예시**

- **백업 작업 자동화**: 중요한 파일이나 디렉터리를 정기적으로 백업하는 스크립트를 작성하여, 매일 또는 매주 자동으로 백업을 실행할 수 있습니다.
- **시스템 모니터링**: 시스템의 CPU 사용률, 디스크 사용량 등을 체크하고, 특정 조건을 만족할 때 경고 메시지를 보내는 스크립트를 구현할 수 있습니다.
- **파일 및 디렉터리 관리**: 오래된 로그 파일 삭제, 파일 이름 일괄 변경 등의 파일 관리 작업을 자동화할 수 있습니다.
- **소프트웨어 설치 및 설정**: 필요한 소프트웨어를 자동으로 설치하고, 설정 파일을 구성하는 스크립트를 만들어 배포와 설정 과정을 단순화할 수 있습니다.

## 3. Shell Script 작성 및 실행

- Shell Script 는 일반적으로 `.sh` 확장자를 사용합니다.
- 스크립트 파일의 첫 줄에는 shell interpreter를 지정하는 셔뱅(shebang) `#!/bin/bash`를 포함합니다.
- 스크립트에 실행 권한을 부여하려면 `chmod +x script.sh` 명령을 사용합니다.
- 스크립트를 실행하려면 `./script.sh`와 같이 경로를 지정하여 실행합니다.

예시:

```bash
#!/bin/bash
echo "Hello, World!"
```

## 4. 변수

- 셸 스크립트에서 변수를 선언하고 사용할 수 있습니다.
- 변수 할당은 `변수명=값` 형식으로 이루어집니다.
- 변수 참조는 `$변수명` 형식으로 이루어집니다. ==> "외워"

예시:

```bash
#!/bin/bash

name="John"
echo "Hello, $name!"
```

## 5. 제어 구조

- 셸 스크립트에서는 `if`, `for`, `while` 등의 제어 구조를 사용할 수 있습니다.

**if statement**:

```bash
#!/bin/bash

age=18

if [ $age -ge 18 ]; then
  echo "You are an adult."
else
  echo "You are a minor."
fi
```

**for loop :** 

```bash
#!/bin/bash

for i in 1 2 3 4 5; do
  echo "Number: $i"
done

```


### 참고: fi와 done의 용례 차이
![[셸스크립트_fi와 done의 차이.png]]


## 6. 명령행 인자

- 셸 스크립트는 명령행 인자를 받아 처리할 수 있습니다.
- 인자는 `$1`, `$2`와 같이 위치 매개변수로 접근할 수 있습니다.

예시:

```bash
#!/bin/bash

echo "First argument: $1"
echo "Second argument: $2"

```

## 7. 셸 내장 명령어

- 셸 스크립트에서는 다양한 셸 내장 명령어를 사용할 수 있습니다.
- 예를 들어, `ls`, `cp`, `mv`, `grep` 등의 명령어를 사용할 수 있습니다.

예시:

```bash
#!/bin/bash

echo "현재 디렉토리의 파일 목록:"
ls

```

추가적인 정보는 아래 웹사이트를 참고하세요!

[Shell Scripting Tutorial](https://www.shellscript.sh/)

## Hands-on Practice!

여러분의 파일은 소중합니다.

특정 폴더에 있는 모든 파일을 시스템에서 백업해주는 shell script를 작성하고, 리눅스 환경에서 실제로 실행해보세요. 코드 템플릿은 아래와 같습니다.

```bash
#!/bin/bash

# 백업할 폴더 지정
SOURCE_FOLDER=""

# 백업 파일을 저장할 폴더 지정
BACKUP_FOLDER=""

# 백업 파일 이름 설정 (날짜와 시간을 포함)
DATE=$(date +%Y-%m-%d_%H-%M-%S)
BACKUP_FILE=""

# 백업 실행
tar -czf $BACKUP_FILE $SOURCE_FOLDER

# 백업 완료 메시지 출력
echo "Backup completed: $BACKUP_FILE"

```